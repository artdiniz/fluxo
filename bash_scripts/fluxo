#!/usr/bin/env bash

# Only global vars, imports and general setup is done here
# Main code starts in ./_run.sh

_FLUXO_COMMAND_NAME="$(basename "$0")"
_FLUXO_COMMAND="$_FLUXO_COMMAND_NAME $@"

_FLUXO_SCRIPTS_DIR="$(
	_fluxo_script_symlink_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"
	_relative_symlinked_dir="$( dirname "$(readlink "$_fluxo_script_symlink_dir/fluxo")" )"

	cd "$_fluxo_script_symlink_dir" >/dev/null 2>&1
	cd "$_relative_symlinked_dir" >/dev/null 2>&1
	pwd
)"

_error_handling_current_command="$_FLUXO_COMMAND"
. "$_FLUXO_SCRIPTS_DIR/_setup_error_handling.sh"
. "$_FLUXO_SCRIPTS_DIR/_setup_lib_run.sh"
. "$_FLUXO_SCRIPTS_DIR/_setup_help.sh"

. "$_FLUXO_SCRIPTS_DIR/_run.sh"